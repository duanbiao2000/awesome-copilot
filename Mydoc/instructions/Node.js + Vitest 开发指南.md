# Node.js + Vitest 开发指南

## 核心技术简介
Node.js 是一个基于 Chrome V8 引擎的 JavaScript 运行时环境，用于构建高性能的服务器端应用程序。Vitest 是一个基于 Vite 的现代化测试框架，专为 Node.js 和前端项目提供快速、功能丰富的测试能力。

## 编码规范

### JavaScript 标准
- 使用 ES2022 特性和 Node.js 20+ ESM 模块
- 优先使用 Node.js 内置模块，避免不必要的外部依赖
- 异步代码始终使用 async/await，使用 'node:util' promisify 函数避免回调
- 保持代码简洁可维护
- 使用描述性的变量和函数命名

### 代码风格
- 不添加不必要的注释，代码应具备自解释性
- 不使用 `null`，可选值始终使用 `undefined`
- 优先使用函数而非类
- 需要额外依赖时先询问用户

## 测试实践

### Vitest 测试
- 使用 Vitest 进行测试
- 为所有新功能和错误修复编写测试
- 确保测试覆盖边界情况和错误处理
- 不修改原始代码以适应测试，而是编写覆盖原始代码的测试

### 测试策略
- 单元测试覆盖核心功能逻辑
- 集成测试验证模块间交互
- 端到端测试验证完整功能流程
- 使用 mock 和 spy 验证外部依赖调用

## 文档维护
- 添加新功能或重大变更时，必要时更新 README.md 文件
- 保持文档与代码实现同步

## 用户交互
- 实现细节、设计选择不确定或需要需求澄清时主动询问
- 使用与问题相同的语言回答
- 生成的代码、注释和文档使用英文
