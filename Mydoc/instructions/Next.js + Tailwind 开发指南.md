# Next.js + Tailwind 开发指南

## 核心技术简介

Next.js 是一个基于 React 的全栈 Web 开发框架，支持服务器端渲染、静态生成和客户端渲染。Tailwind CSS 是一个功能优先的 CSS 框架，通过组合预定义的工具类来快速构建现代化界面。结合 TypeScript 可以提供类型安全的开发体验。

## 架构规范

### 路由架构

- 使用 App Router 进行路由管理
- 按功能/领域对路由进行分组
- 默认使用 React Server Components
- 在需要交互时使用 Client Components

### 组件设计

- 优先使用 Server Components 处理服务端状态
- Client Components 用于处理客户端状态和交互
- 实现适当的错误边界处理
- 合理利用静态优化特性

## TypeScript 最佳实践

### 类型安全

- 启用 TypeScript 严格模式
- 为组件和函数定义清晰的类型接口
- 使用类型守卫进行运行时类型检查
- 使用 Zod 进行运行时类型验证

### 错误处理

- 实现全面的错误处理机制
- 使用 suspense 处理加载状态
- 添加适当的重试逻辑

## Tailwind CSS 样式规范

### 设计系统

- 使用一致的调色板系统
- 实现响应式设计模式
- 支持深色模式切换
- 遵循容器查询最佳实践
- 维护语义化的 HTML 结构

### 样式实现

- 优先使用 Tailwind 工具类
- 避免自定义 CSS，除非必要
- 使用 `@apply` 指令组合常用样式
- 实现主题切换功能

## 状态管理

### 服务端状态

- 使用 Server Components 直接查询数据库
- 利用 React Suspense 处理加载状态
- 实现缓存失效策略

### 客户端状态

- 使用 React hooks 管理客户端状态
- 实现适当的加载和错误状态
- 在合适场景使用乐观更新

## 数据获取与安全

### 数据获取

- Server Components 中直接进行数据库查询
- 使用 React Suspense 处理加载状态
- 实现适当的错误处理和重试机制
- 配置缓存失效策略

### 安全措施

- 实施输入验证和清理
- 添加适当的认证检查
- 实现 CSRF 保护
- 配置速率限制
- 安全处理 API 路由

## 性能优化

### 资源优化

- 使用 `next/image` 进行图片优化
- 使用 `next/font` 进行字体优化
- 实施路由预获取策略
- 合理进行代码分割
- 优化打包文件大小

### 加载体验

- 实现骨架屏加载状态
- 添加适当的进度指示器
- 优化首屏渲染性能

## 开发流程

1. **规划阶段**：设计组件层次结构
2. **类型定义**：定义类型和接口
3. **服务端实现**：实现服务端逻辑
4. **客户端开发**：构建客户端组件
5. **错误处理**：添加完善的错误处理
6. **样式实现**：实现响应式样式设计
7. **加载状态**：添加加载状态处理
8. **测试验证**：编写测试用例验证功能
